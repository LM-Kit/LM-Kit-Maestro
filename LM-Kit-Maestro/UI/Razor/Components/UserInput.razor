<div class="chat-border">
    <textarea @bind=Input class="chat-box" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'></textarea>

    <button @onclick="OnSendButtonClicked" class="send-button @(string.IsNullOrEmpty(Input) ? "send-button-disabled" : "send-button-enabled")">
        <i class="fas fa-arrow-up"></i>
    </button>
</div>

<style>
    /* Chat border */
    .chat-border {
        display: flex;
        border-radius: 32px;
        background-color: var(--Surface);
        transition: border-color 0.3s;
        width: 100%;
        border: 1px solid var(--Background);
        background-color: var(--Surface);
        transition: border-color 0.3s;
    }

    .chat-border:focus-within {
        border-color: var(--Surface4);
    }

    /* Chat box editor */
    .chat-box {
        color: var(--OnSurface);
        width: 100%;
        height: 24px;
        margin-block: 12px;
        max-height: 200px;
        background-color: transparent;
        margin-inline: 20px;
        border: none;
        outline: none;
        resize: none;
    }

    /* Send button */
    .send-button {
        margin-top: auto;
        margin-left: auto;
        width: 32px;
        margin-bottom: 8px;
        margin-right: 12px;
        height: 32px;
        font-size: 14px;
        border: none;
        border-radius: 50%;
        background-color: var(--Surface4);
        color: var(--OnSurface);
        cursor: pointer;
        transition: background-color 0.3s;
    }

    .send-button-disabled {
        color: var(--Surface);
        cursor: not-allowed;
    }

    .send-button-enabled {
        color: var(--OnSurface);
    }
/*     .send-button:hover:not(:disabled) {
        background-color: var(--OutlineVariant);
    } */

    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-thumb {
        background-color: var(--Surface3);
        border-radius: 0px;
        border: 3px solid transparent;
    }

    ::-webkit-scrollbar-track {
        background-color: transparent;
    }

    ::-webkit-scrollbar-thumb:hover {
        background-color: var(--Surface4);
    }
</style>

@code
{
    private string? _input;

    [Parameter]
    public string? Input
    {
        get => _input;
        set
        {
            if (_input != value)
            {
                _input = value;
                InputChanged?.InvokeAsync(value);
                StateHasChanged();
            }
        }
    }

    [Parameter]
    public EventCallback<string?>? InputChanged { get; set; }

    [Parameter]
    public EventCallback ButtonClicked { get; set; }

    public event EventHandler? SendButtonClicked;

    private void OnSendButtonClicked()
    {
        SendButtonClicked?.Invoke(this, EventArgs.Empty);
        ButtonClicked.InvokeAsync();
    }
}