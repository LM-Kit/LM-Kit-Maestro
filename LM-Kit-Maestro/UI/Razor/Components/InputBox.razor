@inject IJSRuntime JS

<div id="inputbox-container">
    <textarea id="input-box"
    readonly=@Readonly
    @bind="InputText"
    @bind:event="oninput"
    placeholder="Enter text here..."></textarea>
</div>

<style>
    #input-box {
    overflow: hidden;
    }
</style>

<script>
    function resizeUserInput() {
    const inputbox = document.getElementById('input-box');
    inputbox.style.height = "";
    inputbox.style.height = inputbox.scrollHeight + "px";
    }
</script>

@code {
    private bool _shouldResizeTextarea;

    [Parameter] public required bool Readonly { get; set; }

    [Parameter] public EventCallback<bool> ReadonlyChanged { get; set; }

    [Parameter] public EventCallback<string> InputTextChanged { get; set; }

    private string _inputText;

    [Parameter]
    public string InputText
    {
        get => _inputText;
        set
        {
            if (_inputText != value)
            {
                _shouldResizeTextarea = true;
                _inputText = value;
                InputTextChanged.InvokeAsync(value);
            }
        }
    }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (_shouldResizeTextarea)
        {
            _shouldResizeTextarea = false;
            await JS.InvokeVoidAsync("resizeUserInput");
        }
    }
}